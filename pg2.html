<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style2.css" />
  </head>
  <body
    class="body height-base lang-en sponsor-FR dir-ltr section-quiz housing-type page-Type device-Desktop"
  >
    <div class="bg">
      <div class="quiz-layout">
        <div class="quiz-header">
          <div class="lines-container">
            <ul id="liner" class="lines">
              <li class="active  m"></li>
              <li class="inactive"></li>
              <li class="inactive"></li>
              <li class="inactive"></li>
              <li class="inactive"></li>
              <li class="inactive"></li>
              <li class="inactive"></li>
              <li class="inactive"></li>
              <li class="inactive"></li>
              <li class="inactive"></li>
              <li class="inactive"></li>
              <li class="inactive"></li>
              <li class="inactive"></li>
            </ul>
          </div>
          <div class="logo-container">
            <div class="logo-main">
              <ul>
                <li class="flip-in-x">
                  <a href="https://www.footprintnetwork.org/" target="_blank">
                    <div class="powered-by">
                      <span class="blue"> Created and powered by </span>
                      <img src="assets/logo-GFN-blue.png" alt="" />
                    </div>
                  </a>
                </li>
              </ul>
            </div>
            <div class="logo-sponsor">
              <ul>
                <li>
                  <div class="cta donate capitalize cta-hvr flip-in-x">
                    <a
                      href="https://connect.clickandpledge.com/w/Form/3dd0f73e-d942-4869-a6f6-5eb00c0bebcb"
                      >Donate</a
                    >
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="cloudcont">
          <div class="clouds">
            <img src="assets/cloud1.png" alt="" class="cloud c1" />
            <img src="assets/cloud2.png" alt="" class="cloud c2" />
            <img src="assets/cloud3.png" alt="" class="cloud c3" />
          </div>
        </div>
        <div class="wrapper">
          <div class="content fade-in-fwd-with-delay" id="qnb">
            <p class="caption">Food</p>
            <div class="question-container">
              <h1 class="main-title">
                How often do you eat animal-based products?
              </h1>
              <h3 class="sub-title">
                (beef, pork, chicken, fish, eggs, dairy products)
              </h3>
            </div>
            <div class="slider-container" style="min-height: 11rem">
              <div class="slider-wrapper">
                <div class="hslider">
                  <div class="min-value">NEVER</div>
                  <div class="slider">
                    <div class="slider-filled"></div>
                    <div class="slider-thumb"></div>
                  </div>
                  <div class="max-value">VERY OFTEN</div>
                </div>
                <div class="sliderValue">
                  <div class="value" id="frst">Never</div>
                  <div class="subValue" id="scnd">(vegan)</div>
                </div>
              </div>
              <div class="detailLink">
                <a class="cta-bg-up" id="qnt">ADD DETAILS TO IMPROVE ACCURACY</a>
              </div>
            </div>
          </div>
        </div>
        <div class="conttt">
          <div id="detailedOptions" class="detailed-options">
            <div class=" detailed-options-container">
              <div class="cta-close hvr-spin" id="qnt2">Ã—</div>
              <div class="question-container">
                <h2 class="slider-advance-question">
                  How often do you eat
                </h2>
              </div>
              <div class="cslider-container">
                <div class="cs-wrapper">
                  <div class="slider-question">beef or lamb?</div>
                  <div id="cSlider" class="cslider slider-1 rs-chrome re-control re-classic-mode rs-animation" style="height: 180px; width: 180px;">
                    <div class="slider-containerr" id="slider-1">
                      <div class="slider-circler"></div>
                      <div class="slider-thumb-1" id="slider-thumb-1"></div>
                      <div class="slider-label-1" id="slider-label-1">Never</div>
                  </div>
                  </div>
                </div>
                <div class="cs-wrapper">
                  <div class="slider-question">Pork?</div>
                  <div id="cSlider" class="cslider slider-2 rs-chrome re-control re-classic-mode rs-animation" style="height: 180px; width: 180px;">
                    <div class="slider-containerr" id="slider-2">
                      <div class="slider-circler"></div>
                      <div class="slider-thumb-2" id="slider-thumb-2"></div>
                      <div class="slider-label-2" id="slider-label-2">Never</div>
                  </div>
                
                  </div>
                </div>
                <div class="cs-wrapper">
                  <div class="slider-question">poultry?</div>
                  <div id="cSlider" class="cslider slider-3 rs-chrome re-control re-classic-mode rs-animation" style="height: 180px; width: 180px;">
                    <div class="slider-containerr" id="slider-3">
                      <div class="slider-circler"></div>
                      <div class="slider-thumb-3" id="slider-thumb-3"></div>
                      <div class="slider-label-3" id="slider-label-3">Never</div>
                  </div>
                  </div>
                </div>
                <div class="cs-wrapper">
                  <div class="slider-question">fish or shellfish?</div>
                  <div id="cSlider" class="cslider slider-4 rs-chrome re-control re-classic-mode rs-animation" style="height: 180px; width: 180px;">
                    <div class="slider-containerr" id="slider-4">
                      <div class="slider-circler"></div>
                      <div class="slider-thumb-4" id="slider-thumb-4"></div>
                      <div class="slider-label-4" id="slider-label-4">Never</div>
                  </div>
                  </div>
                </div>
                <div class="cs-wrapper">
                  <div class="slider-question">eggs, cheese and/ or dairy?</div>
                  <div id="cSlider" class="cslider slider-5 rs-chrome re-control re-classic-mode rs-animation" style="height: 180px; width: 180px;">
                    <div class="slider-containerr" id="slider-5">
                      <div class="slider-circler"></div>
                      <div class="slider-thumb-5" id="slider-thumb-5"></div>
                      <div class="slider-label-5" id="slider-label-5">Never</div>
                  </div>
                  </div>
                </div>
              </div>
              <div class="cta-save cta-hvr" id="qnt3">SAVE</div>
            </div>
          </div>
        </div>
      
        
        <a href="pg-3.html" class="rarrow" style="background-image: url(assets/right.png);z-index: 999;">
                
        </a>
        <footer class="footer-container">
            <div class="grass"
              style="background-image: url('assets/FoodCategoryDesktop.png')"></div>
          </footer>
      </div>
    </div>
    <script>
      const slider = document.querySelector(".slider");
const filled = document.querySelector(".slider-filled");
const thumb = document.querySelector(".slider-thumb");

let isDragging = false;

slider.addEventListener("mousedown", (e) => {
  isDragging = true;
  updateSlider(e);
});

slider.addEventListener("touchstart", (e) => {
  isDragging = true;
  updateSlider(e.touches[0]); // Use the first touch for simplicity
});

document.addEventListener("mousemove", (e) => {
  if (isDragging) {
    updateSlider(e);
  }
});

document.addEventListener("touchmove", (e) => {
  if (isDragging) {
    e.preventDefault(); // Prevent scrolling while sliding
    updateSlider(e.touches[0]);
  }
});

document.addEventListener("mouseup", () => {
  isDragging = false;
});

document.addEventListener("touchend", () => {
  isDragging = false;
});

function updateSlider(e) {
  const sliderRect = slider.getBoundingClientRect();
  const offsetX = e.clientX - sliderRect.left;
  const sliderWidth = sliderRect.width;
  const percentage = Math.min(
    100,
    Math.max(0, (offsetX / sliderWidth) * 100)
  );

  filled.style.width = percentage + "%";
  thumb.style.left = percentage + "%";
  
  



        var y=document.getElementById("frst")
        var x=document.getElementById("scnd")
        const per = percentage;

    if (per < 10) {
        y.innerHTML="Never"
        x.innerHTML = "(Vegan)";
        localStorage.setItem('pg-2-val:',"Never");
    } else if (per>10 && per <= 25) {
        y.innerHTML="Infrequently"
        x.innerHTML = "(vegetarian - eggs/dairy, no meat)";
        localStorage.setItem('pg-2-val:',"Infrequently");
    } else if ( per <= 50) {
        y.innerHTML="Occasionally"
        x.innerHTML = "(really like veggies - occasional meat, eggs/dairy)";
        localStorage.setItem('pg-2-val:',"Occasionally");
    }
        
       else if (per > 50 && per <= 75) {
        y.innerHTML="Often"
        x.innerHTML = "(balanced meat/veggies - meat a few times a week, eggs/dairy almost daily)";
        localStorage.setItem('pg-2-val:',"Often");
    } else
    {
        y.innerHTML="Very Often"
        x.innerHTML = "(Meat Daily)";
        localStorage.setItem('pg-2-val:',"Very Often");

    }
      }

    document.getElementById("qnt").addEventListener("click", function () {
  const divToHide = document.getElementById("qnb");
  const divToAddClass = document.getElementById("detailedOptions");


    

 
    
      divToHide.style.display = "none";
  

      divToAddClass.classList.add("swing-in-top-fwd");
      divToAddClass.style.display = "flex";
      const sliders = [
            document.getElementById("slider-1"),
            document.getElementById("slider-2"),
            document.getElementById("slider-3"),
            document.getElementById("slider-4"),
            document.getElementById("slider-5")
        ];

       
        sliders.forEach((circleSlider, index) => {
            const thumb = document.getElementById(`slider-thumb-${index + 1}`);
            const label = document.getElementById(`slider-label-${index + 1}`);
            let isDragging = false;

            circleSlider.addEventListener("mousedown", (e) => {
                isDragging = true;
                updateSlider(e, thumb, label, index, circleSlider);
            });

            circleSlider.addEventListener("touchstart", (e) => {
                isDragging = true;
                updateSlider(e.touches[0], thumb, label, index, circleSlider);
            });

            document.addEventListener("mousemove", (e) => {
                if (isDragging) {
                    updateSlider(e, thumb, label, index, circleSlider);
                }
            });

            document.addEventListener("touchmove", (e) => {
                if (isDragging) {
                    e.preventDefault();
                    updateSlider(e.touches[0], thumb, label, index, circleSlider);
                }
            });

            document.addEventListener("mouseup", () => {
                isDragging = false;
            });

            document.addEventListener("touchend", () => {
                isDragging = false;
            });
        });

        function updateSlider(e, thumb, label, index, circleSlider) {
            const rect = circleSlider.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            const angle = Math.atan2(e.clientY - centerY, e.clientX - centerX);
            const radius = rect.width / 2;

            let offsetX = radius * Math.cos(angle);
            let offsetY = radius * Math.sin(angle);

            const distance = Math.sqrt(offsetX ** 2 + offsetY ** 2);
            if (distance > radius) {
                const scale = radius / distance;
                offsetX *= scale;
                offsetY *= scale;
            }

            thumb.style.left = (rect.width / 2 + offsetX) + "px";
            thumb.style.top = (rect.height / 2 + offsetY) + "px";

            const degrees = (Math.atan2(offsetY, offsetX) * (180 / Math.PI) + 360) % 360;
            const percentage = (degrees / 360) * 100;
            var xh=Math.floor(percentage);

            var y=document.getElementById("frst")
        var x=document.getElementById("scnd")
        const per = Math.floor(percentage);
       if(per<20)
       {
         label.textContent = "Never";
        localStorage.setItem('pg-2-val-2.'+`${index + 1} :`,label.textContent);
      }
      else if(per>20 && per<=40)
      {
       
        label.textContent = "Infrequently";
        localStorage.setItem('pg-2-val-2.'+`${index + 1} :`,label.textContent);
      }
      else if(per>40 && per<=60)
      {
       
        label.textContent = "Occasionally";
        localStorage.setItem('pg-2-val-2.'+`${index + 1} :`,label.textContent);
      }
      else if(per>60 && per<=80)
      {
        
        label.textContent = "Often";
        localStorage.setItem('pg-2-val-2.'+`${index + 1} :`,label.textContent);
      }
      else
      {
      
        label.textContent = "Always";
        localStorage.setItem('pg-2-val-2.'+`${index + 1} :`,label.textContent);

       }

            
          
        }
      
    });
    document.getElementById('qnt3').addEventListener("click", function () {
      const divToHide3 = document.getElementById("qnb");
      const divToAddClass3 = document.getElementById("detailedOptions");
      
      
      
      divToHide3.removeAttribute("style");
  
      
      
      divToAddClass3.classList.add("swing-out-top-bck");
      divToAddClass3.classList.remove("swing-in-top-fwd");
      divToAddClass3.style.display="none";});
    
    document.getElementById('qnt2').addEventListener("click", function () {
      const divToHide2 = document.getElementById("qnb");
      const divToAddClass2 = document.getElementById("detailedOptions");
      
      
      
      divToHide2.removeAttribute("style");
  
      
      
      divToAddClass2.classList.add("swing-out-top-bck");
      divToAddClass2.classList.remove("swing-in-top-fwd");
      divToAddClass2.style.display="none";

      

      
      const slider = document.querySelector(".slider");
const filled = document.querySelector(".slider-filled");
const thumb = document.querySelector(".slider-thumb");

let isDragging = false;

slider.addEventListener("mousedown", (e) => {
  isDragging = true;
  updateSlider(e);
});

slider.addEventListener("touchstart", (e) => {
  isDragging = true;
  updateSlider(e.touches[0]); // Use the first touch for simplicity
});

document.addEventListener("mousemove", (e) => {
  if (isDragging) {
    updateSlider(e);
  }
});

document.addEventListener("touchmove", (e) => {
  if (isDragging) {
    e.preventDefault(); // Prevent scrolling while sliding
    updateSlider(e.touches[0]);
  }
});

document.addEventListener("mouseup", () => {
  isDragging = false;
});

document.addEventListener("touchend", () => {
  isDragging = false;
});

function updateSlider(e) {
  const sliderRect = slider.getBoundingClientRect();
  const offsetX = e.clientX - sliderRect.left;
  const sliderWidth = sliderRect.width;
  const percentage = Math.min(
    100,
    Math.max(0, (offsetX / sliderWidth) * 100)
  );

  filled.style.width = percentage + "%";
  thumb.style.left = percentage + "%";
  
  



        var y=document.getElementById("frst")
        var x=document.getElementById("scnd")
        const per = percentage;

    if (per < 10) {
        y.innerHTML="Never"
        x.innerHTML = "(Vegan)";
        localStorage.setItem('pg-2-val:',"Never");
    } else if (per>10 && per <= 25) {
        y.innerHTML="Infrequently"
        x.innerHTML = "(vegetarian - eggs/dairy, no meat)";
        localStorage.setItem('pg-2-val:',"Infrequently");
    } else if ( per <= 50) {
        y.innerHTML="Occasionally"
        x.innerHTML = "(really like veggies - occasional meat, eggs/dairy)";
        localStorage.setItem('pg-2-val:',"Occasionally");
    }
        
       else if (per > 50 && per <= 75) {
        y.innerHTML="Often"
        x.innerHTML = "(balanced meat/veggies - meat a few times a week, eggs/dairy almost daily)";
        localStorage.setItem('pg-2-val:',"Often");
    } else
    {
        y.innerHTML="Very Often"
        x.innerHTML = "(Meat Daily)";
        localStorage.setItem('pg-2-val:',"Very Often");

    }
      }
  
});
      
       
    

     
      
      
     </script>
  </body>
</html>
